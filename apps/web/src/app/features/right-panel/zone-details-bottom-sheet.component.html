<div class="bottom-sheet" [class.expanded]="expanded">
  <button class="sheet-toggle" type="button" (click)="toggleExpanded.emit()">
    <span class="sheet-title">
      @if (summary) {
        {{ summary.name }}
      } @else {
        Zone details
      }
    </span>
    <span class="sheet-caret">{{ expanded ? "▾" : "▴" }}</span>
  </button>

  <div class="sheet-body">
    @if (detailsState?.status === "loading") {
      <p class="sheet-muted">Loading details...</p>
    } @else if (detailsState?.status === "error") {
      <p class="sheet-muted">
        {{ detailsState?.message ?? "Unable to load details." }}
      </p>
    } @else if (detailsState?.status === "loaded" && summary) {
      <div class="sheet-meta">
        <span>Dept: {{ summary.department ?? "?" }}</span>
        <span>Region: {{ summary.region ?? "?" }}</span>
        <span>Population: {{ summary.population ?? "?" }}</span>
        <span>Travel: {{ travelLabel ?? "—" }}</span>
      </div>
      <div class="sheet-actions">
        <button type="button">Comparer</button>
        <button type="button">Voir plus</button>
      </div>
    } @else {
      <p class="sheet-muted">Select a zone to see details.</p>
    }
  </div>
</div>
